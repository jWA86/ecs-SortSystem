{"version":3,"sources":["../src/shared/configuration.ts"],"names":[],"mappings":"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","file":"../../../../../../../../dist/shared/configuration.js","sourcesContent":["import * as lodash from \"lodash\";\nimport * as log4js from \"log4js\";\n\nimport { ConfigOptions } from \"karma\";\nimport { merge } from \"lodash\";\n\nimport {\n    BundlerOptions,\n    CoverageOptions,\n    Extendable,\n    KarmaTypescriptConfig,\n    RemapOptions,\n    Reports\n} from \"../api\";\n\nexport interface LoggerList {\n    [key: string]: log4js.Logger;\n}\n\nexport interface Configuration {\n    [key: string]: any;\n}\n\nexport class Configuration implements KarmaTypescriptConfig {\n\n    public karma: ConfigOptions;\n    public bundlerOptions: BundlerOptions;\n    public compilerDelay: number;\n    public compilerOptions: any;\n    public coverageOptions: CoverageOptions;\n    public coverageReporter: any;\n    public defaultTsconfig: any;\n    public exclude: string[] | Extendable;\n    public include: string[] | Extendable;\n    public remapOptions: RemapOptions;\n    public reporters: string[];\n    public reports: Reports;\n    public transformPath: Function;\n    public tsconfig: string;\n\n    public hasCoverageThreshold: boolean;\n\n    private asserted: boolean;\n    private karmaTypescriptConfig: KarmaTypescriptConfig;\n    private callbacks: Array<() => void> = [];\n\n    constructor(private loggers: LoggerList) {}\n\n    public initialize(config: ConfigOptions) {\n\n        this.karma = config || {};\n        this.karmaTypescriptConfig = (<any> config).karmaTypescriptConfig || {};\n\n        this.configureLogging();\n        this.configureBundler();\n        this.configureCoverage();\n        this.configureProject();\n        this.configurePreprocessor();\n        this.configureReporter();\n        this.configureKarmaCoverage();\n        this.assertConfiguration();\n\n        for (let callback of this.callbacks) {\n            callback();\n        }\n    }\n\n    public whenReady(callback: () => void) {\n        this.callbacks.push(callback);\n    }\n\n    public hasFramework(name: string): boolean {\n        return this.karma.frameworks.indexOf(name) !== -1;\n    }\n\n    public hasPreprocessor(name: string): boolean {\n        for (let preprocessor in this.karma.preprocessors) {\n            if (this.karma.preprocessors[preprocessor] &&\n                this.karma.preprocessors[preprocessor].indexOf(name) !== -1) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public hasReporter(name: string): boolean {\n        return this.karma.reporters.indexOf(name) !== -1;\n    }\n\n    private configureLogging() {\n\n        log4js.configure({ appenders: this.karma.loggers });\n\n        Object.keys(this.loggers).forEach((key) => {\n            this.loggers[key].setLevel(this.karma.logLevel);\n        });\n    }\n\n    private configureBundler(): void {\n\n        let defaultBundlerOptions: BundlerOptions = {\n            acornOptions: {\n                ecmaVersion: 6,\n                sourceType: \"module\"\n            },\n            addNodeGlobals: true,\n            constants: {},\n            entrypoints: /.*/,\n            exclude: [],\n            ignore: [],\n            noParse: [],\n            resolve: {\n                alias: {},\n                directories: [\"node_modules\"],\n                extensions: [\".js\", \".json\", \".ts\", \".tsx\"]\n            },\n            sourceMap: false,\n            transforms: [],\n            validateSyntax: true\n        };\n\n        this.bundlerOptions = merge(defaultBundlerOptions, this.karmaTypescriptConfig.bundlerOptions);\n    }\n\n    private configureCoverage() {\n\n        let defaultCoverageOptions: CoverageOptions = {\n            exclude: /\\.(d|spec|test)\\.ts$/i,\n            instrumentation: true,\n            threshold: {\n                file: {\n                    branches: 0,\n                    excludes: [],\n                    functions: 0,\n                    lines: 0,\n                    overrides: {},\n                    statements: 0\n                },\n                global: {\n                    branches: 0,\n                    excludes: [],\n                    functions: 0,\n                    lines: 0,\n                    statements: 0\n                }\n            }\n        };\n\n        this.hasCoverageThreshold = !!this.karmaTypescriptConfig.coverageOptions &&\n            !!this.karmaTypescriptConfig.coverageOptions.threshold;\n        this.coverageOptions = merge(defaultCoverageOptions, this.karmaTypescriptConfig.coverageOptions);\n        this.assertCoverageExclude(this.coverageOptions.exclude);\n    }\n\n    private configureProject(): void {\n\n        this.compilerDelay = this.karmaTypescriptConfig.compilerDelay || 250;\n        this.compilerOptions = this.karmaTypescriptConfig.compilerOptions;\n\n        this.defaultTsconfig = {\n            compilerOptions: {\n                emitDecoratorMetadata: true,\n                experimentalDecorators: true,\n                jsx: \"react\",\n                module: \"commonjs\",\n                sourceMap: true,\n                target: \"ES5\"\n            },\n            exclude: [\"node_modules\"]\n        };\n\n        this.exclude = this.karmaTypescriptConfig.exclude;\n        this.include = this.karmaTypescriptConfig.include;\n        this.tsconfig = this.karmaTypescriptConfig.tsconfig;\n        this.assertExtendable(\"exclude\");\n        this.assertExtendable(\"include\");\n    }\n\n    private configurePreprocessor() {\n\n        let transformPath = (filepath: string) => {\n            return filepath.replace(/\\.(ts|tsx)$/, \".js\");\n        };\n\n        this.transformPath = this.karmaTypescriptConfig.transformPath || transformPath;\n    }\n\n    private configureReporter() {\n        this.reports = this.karmaTypescriptConfig.reports || { html: \"coverage\" };\n        this.remapOptions = this.karmaTypescriptConfig.remapOptions || {};\n    }\n\n    private configureKarmaCoverage() {\n\n        let defaultCoverageReporter = {\n            instrumenterOptions: {\n                istanbul: { noCompact: true }\n            }\n        };\n\n        this.coverageReporter = merge(defaultCoverageReporter, (<any> this.karma).coverageReporter);\n\n        if (Array.isArray(this.karma.reporters)) {\n            this.reporters = this.karma.reporters.slice();\n            if (this.karma.reporters.indexOf(\"coverage\") === -1){\n                this.reporters.push(\"coverage\");\n            }\n        }\n        else {\n            this.reporters = [\"coverage\"];\n        }\n    }\n\n    private assertConfiguration() {\n        if (!this.asserted) {\n            this.asserted = true;\n            this.assertFrameworkConfiguration();\n            this.assertDeprecatedOptions();\n        }\n    }\n\n    private assertFrameworkConfiguration() {\n        if (this.hasPreprocessor(\"karma-typescript\") &&\n          (!this.karma.frameworks || this.karma.frameworks.indexOf(\"karma-typescript\") === -1)) {\n            throw new Error(\"Missing karma-typescript framework, please add\" +\n                            \"'frameworks: [\\\"karma-typescript\\\"]' to your Karma config\");\n        }\n    }\n\n    private assertExtendable(key: string) {\n        let extendable = (<Extendable> this[key]);\n\n        if (extendable === undefined) {\n            return;\n        }\n\n        if (Array.isArray(extendable)) {\n            extendable.forEach((item) => {\n                if (!lodash.isString(item)) {\n                    throw new Error(\"Expected a string in 'karmaTypescriptConfig.\" + key + \"', got [\" +\n                        typeof item + \"]: \" + item);\n                }\n            });\n            return;\n        }\n\n        if (lodash.isObject(extendable)) {\n            if ([\"merge\", \"replace\"].indexOf(extendable.mode) === -1) {\n                throw new Error(\"Expected 'karmaTypescriptConfig.\" + key + \".mode' to be 'merge|replace', got '\" +\n                    extendable.mode + \"'\");\n            }\n            if (Array.isArray(extendable.values)) {\n                extendable.values.forEach((item) => {\n                    if (!lodash.isString(item)) {\n                        throw new Error(\"Expected a string in 'karmaTypescriptConfig.\" + key + \".values', got [\" +\n                            typeof item + \"]: \" + item);\n                    }\n                });\n            }\n            return;\n        }\n\n        throw new Error(\"The option 'karmaTypescriptConfig.\" + key +\n                        \"' must be an array of strings or { mode: \\\"replace|extend\\\", values: [string, string], got [\" +\n                    typeof this.exclude + \"]: \" + this.exclude);\n    }\n\n    private assertDeprecatedOptions() {\n        if ((<any> this.bundlerOptions).ignoredModuleNames) {\n            throw new Error(\"The option 'karmaTypescriptConfig.bundlerOptions.ignoredModuleNames' has been \" +\n                            \"removed, please use 'karmaTypescriptConfig.bundlerOptions.exclude' instead\");\n        }\n\n        if ((<any> this.karmaTypescriptConfig).excludeFromCoverage !== undefined) {\n            throw new Error(\"The option 'karmaTypescriptConfig.excludeFromCoverage' has been \" +\n                            \"removed, please use 'karmaTypescriptConfig.coverageOptions.exclude' instead\");\n        }\n\n        if ((<any> this.karmaTypescriptConfig).disableCodeCoverageInstrumentation !== undefined) {\n            throw new Error(\"The option 'karmaTypescriptConfig.disableCodeCoverageInstrumentation' has been \" +\n                            \"removed, please use 'karmaTypescriptConfig.coverageOptions.instrumentation' instead\");\n        }\n    }\n\n    private assertCoverageExclude(regex: any) {\n        if (regex instanceof RegExp || !regex) {\n            return regex;\n        }\n        else if (Array.isArray(regex)) {\n            regex.forEach((r) => {\n                if (!(r instanceof RegExp)) {\n                    this.throwCoverageExcludeError(r);\n                }\n            });\n            return regex;\n        }\n\n        this.throwCoverageExcludeError(regex);\n    }\n\n    private throwCoverageExcludeError(regex: any) {\n        throw new Error(\"karmaTypescriptConfig.coverageOptions.exclude \" +\n            \"must be a single RegExp or an Array of RegExp, got [\" + typeof regex + \"]: \" + regex);\n    }\n}\n"]}